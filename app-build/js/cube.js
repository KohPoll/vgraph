define(["lib/Three"],function(d){function c(a){a=a||{};this._init(a);this.speedX=0;this.speedY=0;this.speedZ=0;this.rotX=a.rotSpeed[0]||0;this.rotY=a.rotSpeed[1]||0;this.rotZ=a.rotSpeed[2]||0;this.farestDist=0;this.nearestDist=0;this.arrviedEnd="none";this._isAnimated=true}c.prototype.start=function(){this._isAnimated=true};c.prototype.stop=function(){this._isAnimated=false};c.prototype.move=function(a){var b=a.speed;this.speedX=b[0];this.speedY=b[1];this.speedZ=b[2];this.nearestDist=a.near;this.farestDist=a.far};c.prototype.update=function(){if(this._isAnimated){var a=this.mesh;a.rotation.y+=this.rotY;a.rotation.x+=this.rotX;a.rotation.z+=this.rotZ;if(a.position.z<this.nearestDist||a.position.z>this.farestDist){a.position.z+=this.speedZ;a.position.x+=this.speedX;a.position.y+=this.speedY}else{if(a.position.z>=this.nearestDist){this.arrivedEnd="near"}if(a.position.z<=this.farestDist){this.arrviedEnd="far"}}}};c.prototype._init=function(v){var b=[],o,p=v.pos||[],a=v.size||200,s=v.scene,i=v.textures||[];for(var t=0;t<6;t++){var u,q=i[t],r;if(q){r=new d.MeshBasicMaterial({map:d.ImageUtils.loadTexture(q)})}else{r=new d.MeshBasicMaterial({color:Math.random()*16777215})}b.push(r)}o=new d.CubeGeometry(a,a,a,1,1,1,b);this.mesh=new d.Mesh(o,new d.MeshFaceMaterial());this.mesh.position.x=p[0]||0;this.mesh.position.y=p[1]||0;this.mesh.position.z=p[2]||0;this.mesh.overdraw=true;s&&s.add&&s.add(this.mesh)};return c});