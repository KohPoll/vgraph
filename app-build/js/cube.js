define(["lib/Three"],function(d){function c(a){a=a||{};this._init(a);this.speedX=0;this.speedY=0;this.speedZ=0;this.rotX=a.rotSpeed[0]||0;this.rotY=a.rotSpeed[1]||0;this.rotZ=a.rotSpeed[2]||0;this.farestDist=0;this.nearestDist=0;this.arrviedEnd="none";this._isAnimated=true}c.prototype.start=function(){this._isAnimated=true};c.prototype.stop=function(){this._isAnimated=false};c.prototype.move=function(a){var b=a.speed;this.speedX=b[0];this.speedY=b[1];this.speedZ=b[2];this.nearestDist=a.near;this.farestDist=a.far};c.prototype.update=function(){if(this._isAnimated){var a=this.mesh;a.rotation.y+=this.rotY;a.rotation.x+=this.rotX;a.rotation.z+=this.rotZ;if(a.position.z<this.nearestDist||a.position.z>this.farestDist){a.position.z+=this.speedZ;a.position.x+=this.speedX;a.position.y+=this.speedY}else{if(a.position.z>=this.nearestDist){this.arrivedEnd="near"}if(a.position.z<=this.farestDist){this.arrviedEnd="far"}}}};c.prototype._init=function(o){var q=[],s,t=o.pos||[],p=o.size||200,a=o.scene,r=o.textures||[];for(var b=0;b<6;b++){var i,u=r[b],v;if(u){v=new d.MeshBasicMaterial({map:d.ImageUtils.loadTexture(u)})}else{v=new d.MeshBasicMaterial({color:Math.random()*16777215})}q.push(v)}s=new d.CubeGeometry(p,p,p,1,1,1,q);this.mesh=new d.Mesh(s,new d.MeshFaceMaterial());this.mesh.position.x=t[0]||0;this.mesh.position.y=t[1]||0;this.mesh.position.z=t[2]||0;this.mesh.overdraw=true;a&&a.add&&a.add(this.mesh)};return c});