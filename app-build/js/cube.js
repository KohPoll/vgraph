define(["lib/Three"],function(a){function b(c){c=c||{};this._init(c);this.speedX=0;this.speedY=0;this.speedZ=0;this.rotX=c.rotSpeed[0]||0;this.rotY=c.rotSpeed[1]||0;this.rotZ=c.rotSpeed[2]||0;this.farestDist=0;this.nearestDist=0;this.arrviedEnd="none";this._isAnimated=true}b.prototype.start=function(){this._isAnimated=true};b.prototype.stop=function(){this._isAnimated=false};b.prototype.move=function(d){var c=d.speed;this.speedX=c[0];this.speedY=c[1];this.speedZ=c[2];this.nearestDist=d.near;this.farestDist=d.far};b.prototype.update=function(){if(this._isAnimated){var c=this.mesh;c.rotation.y+=this.rotY;c.rotation.x+=this.rotX;c.rotation.z+=this.rotZ;if(c.position.z<this.nearestDist||c.position.z>this.farestDist){c.position.z+=this.speedZ;c.position.x+=this.speedX;c.position.y+=this.speedY}else{if(c.position.z>=this.nearestDist){this.arrivedEnd="near"}if(c.position.z<=this.farestDist){this.arrviedEnd="far"}}}};b.prototype._init=function(c){var m=[],k,j=c.pos||[],n=c.size||200,f=c.scene,l=c.textures||[];for(var e=0;e<6;e++){var d,h=l[e],g;if(h){g=new a.MeshBasicMaterial({map:a.ImageUtils.loadTexture(h)})}else{g=new a.MeshBasicMaterial({color:Math.random()*16777215})}m.push(g)}k=new a.CubeGeometry(n,n,n,1,1,1,m);this.mesh=new a.Mesh(k,new a.MeshFaceMaterial());this.mesh.position.x=j[0]||0;this.mesh.position.y=j[1]||0;this.mesh.position.z=j[2]||0;this.mesh.overdraw=true;f&&f.add&&f.add(this.mesh)};return b});