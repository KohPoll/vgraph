define(function(){var g={};g.version="1.0.1";var e={};var h=-1;var f=function(a,c,b){if(!e.hasOwnProperty(a)){return false}var d=function(){var r=e[a];var q=function(k){return function(){throw k}};for(var j=0,p=r.length;j<p;j++){try{r[j].func(a,c)}catch(i){setTimeout(q(i),0)}}};if(b===true){d()}else{setTimeout(d,0)}return true};g.publish=function(b,a){return f(b,a,false)};g.publishSync=function(b,a){return f(b,a,true)};g.subscribe=function(b,c){if(!e.hasOwnProperty(b)){e[b]=[]}var a=(++h).toString();e[b].push({token:a,func:c});return a};g.unsubscribe=function(c){for(var b in e){if(e.hasOwnProperty(b)){for(var d=0,a=e[b].length;d<a;d++){if(e[b][d].token===c){e[b].splice(d,1);return c}}}}return false};return g});