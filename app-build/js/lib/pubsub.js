define(function(){var e={};e.version="1.0.1";var g={};var f=-1;var h=function(c,a,d){if(!g.hasOwnProperty(c)){return false}var b=function(){var q=g[c];var p=function(k){return function(){throw k}};for(var i=0,j=q.length;i<j;i++){try{q[i].func(c,a)}catch(r){setTimeout(p(r),0)}}};if(d===true){b()}else{setTimeout(b,0)}return true};e.publish=function(b,a){return h(b,a,false)};e.publishSync=function(b,a){return h(b,a,true)};e.subscribe=function(a,b){if(!g.hasOwnProperty(a)){g[a]=[]}var c=(++f).toString();g[a].push({token:c,func:b});return c};e.unsubscribe=function(a){for(var d in g){if(g.hasOwnProperty(d)){for(var b=0,c=g[d].length;b<c;b++){if(g[d][b].token===a){g[d].splice(b,1);return a}}}}return false};return e});