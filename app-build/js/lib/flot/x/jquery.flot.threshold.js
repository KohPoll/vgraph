(function(d){var e={series:{threshold:null}};function f(b){function a(p,x,i,I,C){var F=i.pointsize,B,J,K,E,s,D=d.extend({},x);D.datapoints={points:[],pointsize:F,format:i.format};D.label=null;D.color=C;D.threshold=null;D.originSeries=x;D.data=[];var H=i.points,G=x.lines.show;threspoints=[];newpoints=[];for(B=0;B<H.length;B+=F){J=H[B];K=H[B+1];s=E;if(K<I){E=threspoints}else{E=newpoints}if(G&&s!=E&&J!=null&&B>0&&H[B-F]!=null){var y=(J-H[B-F])/(K-H[B-F+1])*(I-K)+J;s.push(y);s.push(I);for(m=2;m<F;++m){s.push(H[B+m])}E.push(null);E.push(null);for(m=2;m<F;++m){E.push(H[B+m])}E.push(y);E.push(I);for(m=2;m<F;++m){E.push(H[B+m])}}E.push(J);E.push(K);for(m=2;m<F;++m){E.push(H[B+m])}}i.points=newpoints;D.datapoints.points=threspoints;if(D.datapoints.points.length>0){p.getData().push(D)}}function c(j,l,k){if(!l.threshold){return}if(l.threshold instanceof Array){l.threshold.sort(function(g,h){return g.below-h.below});d(l.threshold).each(function(h,g){a(j,l,k,g.below,g.color)})}else{a(j,l,k,l.threshold.below,l.threshold.color)}}b.hooks.processDatapoints.push(c)}d.plot.plugins.push({init:f,options:e,name:"threshold",version:"1.2"})})(jQuery);