(function(f){var d={series:{threshold:null}};function e(c){function b(C,i,B,K,E){var H=B.pointsize,D,p,x,s,G,F=f.extend({},i);F.datapoints={points:[],pointsize:H,format:B.format};F.label=null;F.color=E;F.threshold=null;F.originSeries=i;F.data=[];var J=B.points,I=i.lines.show;threspoints=[];newpoints=[];for(D=0;D<J.length;D+=H){p=J[D];x=J[D+1];G=s;if(x<K){s=threspoints}else{s=newpoints}if(I&&G!=s&&p!=null&&D>0&&J[D-H]!=null){var y=(p-J[D-H])/(x-J[D-H+1])*(K-x)+p;G.push(y);G.push(K);for(m=2;m<H;++m){G.push(J[D+m])}s.push(null);s.push(null);for(m=2;m<H;++m){s.push(J[D+m])}s.push(y);s.push(K);for(m=2;m<H;++m){s.push(J[D+m])}}s.push(p);s.push(x);for(m=2;m<H;++m){s.push(J[D+m])}}B.points=newpoints;F.datapoints.points=threspoints;if(F.datapoints.points.length>0){C.getData().push(F)}}function a(j,l,k){if(!l.threshold){return}if(l.threshold instanceof Array){l.threshold.sort(function(g,h){return g.below-h.below});f(l.threshold).each(function(h,g){b(j,l,k,g.below,g.color)})}else{b(j,l,k,l.threshold.below,l.threshold.color)}}c.hooks.processDatapoints.push(a)}f.plot.plugins.push({init:e,options:d,name:"threshold",version:"1.2"})})(jQuery);