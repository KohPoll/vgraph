(function(d){var e={series:{stack:null}};function f(a){function c(i,l){var n=null;for(var o=0;o<l.length;++o){if(i==l[o]){break}if(l[o].stack==i.stack){n=l[o]}}return n}function b(U,O,ae){if(O.stack==null){return}var Z=c(O,U.getData());if(!Z){return}var i=ae.pointsize,P=ae.points,ad=Z.datapoints.pointsize,l=Z.datapoints.points,S=[],K,M,ac,j,s,V,Q=O.lines.show,N=O.bars.horizontal,aa=i>2&&(N?ae.format[2].x:ae.format[2].y),ab=Q&&O.lines.steps,R=true,X=N?1:0,L=N?0:1,T=0,W=0,Y;while(true){if(T>=P.length){break}Y=S.length;if(P[T]==null){for(m=0;m<i;++m){S.push(P[T+m])}T+=i}else{if(W>=l.length){if(!Q){for(m=0;m<i;++m){S.push(P[T+m])}}T+=i}else{if(l[W]==null){for(m=0;m<i;++m){S.push(null)}R=true;W+=ad}else{K=P[T+X];M=P[T+L];j=l[W+X];s=l[W+L];V=0;if(K==j){for(m=0;m<i;++m){S.push(P[T+m])}S[Y+L]+=s;V=s;T+=i;W+=ad}else{if(K>j){if(Q&&T>0&&P[T-i]!=null){ac=M+(P[T-i+L]-M)*(j-K)/(P[T-i+X]-K);S.push(j);S.push(ac+s);for(m=2;m<i;++m){S.push(P[T+m])}V=s}W+=ad}else{if(R&&Q){T+=i;continue}for(m=0;m<i;++m){S.push(P[T+m])}if(Q&&W>0&&l[W-ad]!=null){V=s+(l[W-ad+L]-s)*(K-j)/(l[W-ad+X]-j)}S[Y+L]+=V;T+=i}}R=false;if(Y!=S.length&&aa){S[Y+2]+=V}}}}if(ab&&Y!=S.length&&Y>0&&S[Y]!=null&&S[Y]!=S[Y-i]&&S[Y+1]!=S[Y-i+1]){for(m=0;m<i;++m){S[Y+i+m]=S[Y+m]}S[Y+1]=S[Y-i+1]}}ae.points=S}a.hooks.processDatapoints.push(b)}d.plot.plugins.push({init:f,options:e,name:"stack",version:"1.2"})})(jQuery);