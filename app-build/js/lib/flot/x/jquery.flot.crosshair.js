(function(d){var e={crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}};function f(c){var a={x:-1,y:-1,locked:false};c.setCrosshair=function m(g){if(!g){a.x=-1}else{var h=c.p2c(g);a.x=Math.max(0,Math.min(h.left,c.width()));a.y=Math.max(0,Math.min(h.top,c.height()))}c.triggerRedrawOverlay()};c.clearCrosshair=c.setCrosshair;c.lockCrosshair=function l(g){if(g){c.setCrosshair(g)}a.locked=true};c.unlockCrosshair=function k(){a.locked=false};function n(g){if(a.locked){return}if(a.x!=-1){a.x=-1;c.triggerRedrawOverlay()}}function b(h){if(a.locked){return}if(c.getSelection&&c.getSelection()){a.x=-1;return}var g=c.offset();a.x=Math.max(0,Math.min(h.pageX-g.left,c.width()));a.y=Math.max(0,Math.min(h.pageY-g.top,c.height()));c.triggerRedrawOverlay()}c.hooks.bindEvents.push(function(g,h){if(!g.getOptions().crosshair.mode){return}h.mouseout(n);h.mousemove(b)});c.hooks.drawOverlay.push(function(g,i){var j=g.getOptions().crosshair;if(!j.mode){return}var h=g.getPlotOffset();i.save();i.translate(h.left,h.top);if(a.x!=-1){i.strokeStyle=j.color;i.lineWidth=j.lineWidth;i.lineJoin="round";i.beginPath();if(j.mode.indexOf("x")!=-1){i.moveTo(a.x,0);i.lineTo(a.x,g.height())}if(j.mode.indexOf("y")!=-1){i.moveTo(0,a.y);i.lineTo(g.width(),a.y)}i.stroke()}i.restore()});c.hooks.shutdown.push(function(g,h){h.unbind("mouseout",n);h.unbind("mousemove",b)})}d.plot.plugins.push({init:f,options:e,name:"crosshair",version:"1.0"})})(jQuery);